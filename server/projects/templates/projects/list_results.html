{% extends "base-leftnav.html" %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/projects.css' %}" />
<style>
.search-box{
	padding:8px;
}
</style>
{% endblock styles %}

{% block content %}
<div class="row">
	<div class="col-xs-12 search-box">
		<form method="GET" action="">
			<input type="text" value="{{ search_query|default_if_none:"" }}" name="q"></input>
			<button type="submit">Search</button>
		</form>
	</div>
</div>

{% for p in projects %}
<div class="project-entry row" data-project="{{ p.slug }}">
	<div class="col-md-3">
		<h3>{{ p.title }}</h3>
		<p>{{ p.date_created|date:"N d Y" }}</p>
	</div>
	<div class="col-md-9">
		
	</div>
</div>
{% empty %}
{# this is what is called if there were no objects to loop over #}
<h4>Sorry, the search &quot;{{ search_query }}&quot; found no results</h4>
{% endfor %}
{% endblock content %}

{% block postscript %}
<script>
$(document).ready(function(){
	var proj_divs = $("div.project-entry");
	proj_divs.click(function(){
		var slug_target = $(this).data("project");
		console.log(slug_target);
		if(typeof(slug_target) !== "undefined")
			window.location = "/projects/" + slug_target;
	});
});
</script>
{% endblock postscript %}